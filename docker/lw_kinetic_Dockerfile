FROM osrf/ros:kinetic-desktop-full

MAINTAINER Eiji Uchibe <uchibe@atr.jp>
MAINTAINER Jiexin Wang <wang-j@atr.jp>

############################################
# ROS Kinetic
#   Turtlebot
#   http://answers.ros.org/question/246015/installing-utrtlebot-on-ros-kinetic/
############################################
RUN apt-get update && apt-get install -y \
      ros-kinetic-librealsense ros-kinetic-realsense-camera \
      ros-kinetic-turtlebot ros-kinetic-turtlebot-gazebo \
      python-rosinstall python-rosinstall-generator \
      python-wstool \
      build-essential git \
    && apt-get clean && rm -rf /var/cache/apt/archives/* /var/lib/apt/lists/*

RUN echo "source /opt/ros/kinetic/setup.bash" >> ~/.bashrc
ENV BASH_ENV ~/.bashrc

############################################
# Tensorflow, Theano and Keras
# OpenAI Gym
############################################
RUN apt-get update && apt-get install -y \
      python-numpy python-matplotlib python-dev \
      python-opengl python-pip \
      cmake zlib1g-dev libjpeg-dev xvfb libav-tools \
      xorg-dev libboost-all-dev libsdl2-dev swig \
      gfortran python-skimage psmisc \
    && apt-get clean && rm -rf /var/cache/apt/archives/* /var/lib/apt/lists/*

RUN pip install --upgrade pip \
    && pip install h5py tensorflow Theano keras 'gym[all]'
